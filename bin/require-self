#!/usr/bin/env node

var path = require('path');
var createPseudoModule = require('../');

// Get the name of the module in the current working directory.
var cwd = process.cwd();
var pkg = require(path.join(cwd, 'package.json'));
var name = pkg.name;

// Create the 'main' pseudo-module
createPseudoModule(cwd, name, pkg.main || 'index.js');

// Support alternative package entry points if passed as arguments. e.g.
//
//   require-self 'lodash/array' 'lodash/fp/object'
//
if (process.argv.length > 2) {
  var entryPoints = process.argv.slice(2);

  entryPoints.forEach(function(entryPoint) {
    createPseudoModule(cwd, name, entryPoint);
  });
}
